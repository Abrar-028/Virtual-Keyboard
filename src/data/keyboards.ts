// Default keyboard layout for fallback
const defaultLayout = [
  ['`', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '-', '='],
  ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', '[', ']', '\\'],
  ['a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', ';', "'"],
  ['z', 'x', 'c', 'v', 'b', 'n', 'm', ',', '.', '/'],
] as const;

export function getDefaultLayout() {
  return defaultLayout;
}

export const keyboards = {
  // English
  en: defaultLayout,
  en_shift: [
    ['~', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_', '+'],
    ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', '{', '}', '|'],
    ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', ':', '"'],
    ['Z', 'X', 'C', 'V', 'B', 'N', 'M', '<', '>', '?'],
  ],

  // Standard Urdu
  ur: [
    ['`', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '-', '='],
    ['ق', 'و', 'ع', 'ر', 'ت', 'ے', 'ء', 'ی', 'ہ', 'پ', '[', ']', '\\'],
    ['ا', 'س', 'د', 'ف', 'گ', 'ح', 'ج', 'ک', 'ل', '؛', "'"],
    ['ز', 'ش', 'چ', 'ط', 'ب', 'ن', 'م', '،', '۔', '/'],
  ],
  ur_shift: [
    ['~', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_', '+'],
    ['ْ', 'ٔ', 'ٰ', 'ڑ', 'ٹ', 'ۓ', 'ئ', 'ێ', 'ۃ', 'ُ', '{', '}', '|'],
    ['آ', 'ص', 'ڈ', 'ف', 'غ', 'ح', 'ض', 'خ', 'ل', ':', '"'],
    ['ذ', 'ژ', 'ث', 'ظ', 'ب', 'ں', 'م', '<', '>', '؟'],
  ],

  // Phonetic Urdu
  ur_phonetic: [
    ['`', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '-', '='],
    ['ق', 'و', 'ع', 'ر', 'ت', 'ے', 'ء', 'ی', 'ہ', 'پ', '[', ']', '\\'],
    ['ا', 'س', 'د', 'ف', 'گ', 'ح', 'ج', 'ک', 'ل', '؛', "'"],
    ['ز', 'ش', 'چ', 'ط', 'ب', 'ن', 'م', '،', '۔', '/'],
  ],
  ur_phonetic_shift: [
    ['~', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_', '+'],
    ['ْ', 'ٔ', 'ٰ', 'ڑ', 'ٹ', 'ۓ', 'ئ', 'ێ', 'ۃ', 'ُ', '{', '}', '|'],
    ['آ', 'ص', 'ڈ', 'ف', 'غ', 'ح', 'ض', 'خ', 'ل', ':', '"'],
    ['ذ', 'ژ', 'ث', 'ظ', 'ب', 'ں', 'م', '<', '>', '؟'],
  ],

  // Arabic
  ar: [
    ['ذ', '١', '٢', '٣', '٤', '٥', '٦', '٧', '٨', '٩', '٠', '-', '='],
    ['ض', 'ص', 'ث', 'ق', 'ف', 'غ', 'ع', 'ه', 'خ', 'ح', 'ج', 'د', '\\'],
    ['ش', 'س', 'ي', 'ب', 'ل', 'ا', 'ت', 'ن', 'م', 'ك', 'ط'],
    ['ئ', 'ء', 'ؤ', 'ر', 'لا', 'ى', 'ة', 'و', 'ز', 'ظ'],
  ],
  ar_shift: [
    ['ّ', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_', '+'],
    ['َ', 'ً', 'ُ', 'ٌ', 'ٍ', 'إ', 'أ', 'آ', 'ِ', '÷', '×', '؛', '|'],
    ['ِ', 'ٍ', ']', '[', 'ل', 'أ', 'ـ', '،', '/', ':', '"'],
    ['~', 'ْ', '}', '{', 'آ', 'ٱ', 'ٰ', ',', '.', '؟'],
  ],

  // Hebrew
  he: [
    ['~', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '-', '='],
    ['/', '\'', 'ק', 'ר', 'א', 'ט', 'ו', 'ן', 'ם', 'פ', '[', ']', '\\'],
    ['ש', 'ד', 'ג', 'כ', 'ע', 'י', 'ח', 'ל', 'ך', 'ף', ','],
    ['ז', 'ס', 'ב', 'ה', 'נ', 'מ', 'צ', 'ת', 'ץ', '.'],
  ],

  // Persian
  fa: [
    ['`', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹', '۰', '-', '='],
    ['ض', 'ص', 'ث', 'ق', 'ف', 'غ', 'ع', 'ه', 'خ', 'ح', 'ج', 'چ', '\\'],
    ['ش', 'س', 'ی', 'ب', 'ل', 'ا', 'ت', 'ن', 'م', 'ک', 'گ'],
    ['ظ', 'ط', 'ز', 'ر', 'ذ', 'د', 'پ', 'و', '.', '/'],
  ],
} as const;

// Phonetic mapping for Urdu
const phoneticMap: Record<string, string> = {
  'a': 'ا',
  'b': 'ب',
  'c': 'چ',
  'd': 'د',
  'e': 'ع',
  'f': 'ف',
  'g': 'گ',
  'h': 'ح',
  'i': 'ی',
  'j': 'ج',
  'k': 'ک',
  'l': 'ل',
  'm': 'م',
  'n': 'ن',
  'o': 'و',
  'p': 'پ',
  'q': 'ق',
  'r': 'ر',
  's': 'س',
  't': 'ت',
  'u': 'ء',
  'v': 'ط',
  'w': 'و',
  'x': 'ش',
  'y': 'ے',
  'z': 'ز',
};

const phoneticShiftMap: Record<string, string> = {
  'A': 'آ',
  'B': 'ب',
  'C': 'ث',
  'D': 'ڈ',
  'E': 'ۓ',
  'F': 'ف',
  'G': 'غ',
  'H': 'ح',
  'I': 'ێ',
  'J': 'ض',
  'K': 'خ',
  'L': 'ل',
  'M': 'م',
  'N': 'ں',
  'O': 'ٹ',
  'P': 'پ',
  'Q': 'ق',
  'R': 'ڑ',
  'S': 'ص',
  'T': 'ٹ',
  'U': 'ء',
  'V': 'ظ',
  'W': 'و',
  'X': 'ژ',
  'Y': 'ے',
  'Z': 'ذ',
};

export function getPhoneticChar(key: string, shifted: boolean): string | undefined {
  return shifted ? phoneticShiftMap[key] : phoneticMap[key.toLowerCase()];
}